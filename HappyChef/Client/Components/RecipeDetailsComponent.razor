@using HappyChef.Client.Models


<div class="row my-2">
    <div class="col-12">
        <button class="btn btn-sm btn-primary" @onclick="@(() => ChangeDisplay(DisplayState.Picture))"> Picture</button>
        <button class="btn btn-sm btn-primary" @onclick="@(() => ChangeDisplay(DisplayState.Ingredients))"> Ingredients</button>
        <button class="btn btn-sm btn-primary" @onclick="@(() => ChangeDisplay(DisplayState.Labels))"> Labels</button>
        <button class="btn btn-sm btn-primary" @onclick="@(() => ChangeDisplay(DisplayState.Diet))"> Diet Labels</button>

    </div>
</div>

@switch (displayState)
{
    case DisplayState.Picture:
        <div class="row mt-1">
            <div class="col-12">
               <img class="img-fluid" src="@Recipe.Image"/>
            </div>
        </div>
        break;
    case DisplayState.Ingredients:
        <DxDataGrid Data="@Recipe.Ingredients" AllowSort="true" ShowFilterRow="true">
            <Columns>
                <DxDataGridColumn Field=@nameof(Ingredient.Text) Caption="Ingrediant" SortOrder="DataGridColumnSortOrder.Ascending" />
                <DxDataGridColumn Field=@nameof(Ingredient.Weight) Caption="Weight" />
                <DxDataGridColumn Field=@nameof(Ingredient.FoodCategory) Caption="Food category" />
            </Columns>
        </DxDataGrid>
        break;
    case DisplayState.Labels:
        @for (int i = 0; i < Recipe.HealthLabels.Count; i++)
        {
            <div class="row mt-1">
                <div class="col-12">
                    @Recipe.HealthLabels[i]
                </div>
            </div>
        }
        break;
    case DisplayState.Diet:
        @for (int i = 0; i < Recipe.DietLabels.Count; i++)
        {
            <div class="row mt-1">
                <div class="col-12">
                    @Recipe.DietLabels[i]
                </div>
            </div>
        }
        break;
    default:
        break;
}



@code {

    [Parameter]
    public Recipe Recipe { get; set; }

    private enum DisplayState
    {
        Picture,
        Ingredients,
        Labels,
        Diet
    }

    private DisplayState displayState = DisplayState.Picture;

    private Task ChangeDisplay(DisplayState newState)
    {
        displayState = newState;
        this.StateHasChanged();
        return Task.CompletedTask;
    }



}
